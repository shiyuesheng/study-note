# JVM学习-内存结构-对象的访问定位

> Java程序会通过栈上的reference数据来操作堆上的具体对象。主流的对象访问方式是：使用句柄、直接指针。

## 句柄访问

​	Java堆会划分出一块内存来作为句柄池，reference中存储的就是对象的句柄地址，而句柄中包含了对象的实例数据与类型数据各自具体的地址信息。

​	优势：reference中存储的是稳定句柄地址，在对象被移动（垃圾收集时会移动对象）时只会改变句柄中的实例数据指针，栈上的reference不需要修改。

## 直接指针

​	reference中存储的直接就是对象地址，但是对象的内存布局就得考虑如何放置访问类型数据的相关信息。

​	优势：对象访问速度快，节省了一次指针定位的时间开销，对象访问时非常频繁的，极少称多也是一笔可观的执行成本，HotSpot虚拟机使用的就是直接指针访问对象。



从整个软件开发来看，句柄访问，直接指针都有适合自己的使用场景。



*上一张五颜六色的图*

<img src="/Users/shiyuesheng/Desktop/java技术笔记/Jvm虚拟机/图片/对象的访问定位.jpg" alt="对象的访问定位" style="zoom:75%;" />





> 参考资料：
>
> 1. 《深入理解Java虚拟机（第三版）》-周志明
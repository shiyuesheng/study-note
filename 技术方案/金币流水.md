# 金币流水技术方案

## 业务描述

1、用户行为（观看新闻动态30s，获取金币），完成任务获取金币

2、金币写入事件队列

3、bg任务消费金币事件队列

4、写入mysql 流水表、中间表，覆盖redis（保证事务）



## 业务量级

用户日活：300w

金币流水：千万级的，大约是5000w

单个用户的平均流水记录是16条

## 业务瓶颈

1、金币流水到账-单机的线程处理能力过低，没能把单机性能、网络性能、数据库性能有效利用。

## 解决方案

1、单机500个流水线

2、分布式bg任务
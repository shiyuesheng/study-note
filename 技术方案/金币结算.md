# 金币流水技术方案

## 业务描述

1、每日凌晨处理用户的金币余额，金币转零钱

## 业务量级

用户日活：300w

金币流水：千万级的，大约是5000w

单个用户的平均流水记录是16条

## 业务瓶颈

1、金币赚零钱结算-单库单表的数据量过大，查询速度太慢

## 解决方案

1、分库（64），平均5000w / 64 约等于 100w条记录

2、每日使用新的流水表，符合业务场景（之前的金币流水归档）